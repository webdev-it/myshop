<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Интернет-магазин</title>
  <link rel="stylesheet" href="styles/style.css" />
</head>
<body>
  <!-- Главная страница -->
  <div id="main-page" class="spa-page active">
    <!-- Описание сайта -->
    <section id="site-description" class="main-description">
      <h1>Добро пожаловать в интернет-магазин!</h1>
      <p>Здесь вы можете найти и купить цифровые товары, воспользоваться поиском, просматривать категории и получать бонусы за покупки. Всё просто, быстро и безопасно!</p>
    </section>
    <!-- Поиск товаров -->
    <section id="main-search" class="main-search">
      <div class="main-search-col">
        <input id="main-search-input" type="text" placeholder="Поиск товаров..." autocomplete="off">
        <button id="main-search-btn">Поиск</button>
      </div>
      <div class="main-search-col">
        <select id="main-search-category">
          <!-- категории -->
        </select>
        <select id="main-search-sort">
          <option value="">Сортировка</option>
          <option value="price-asc">Цена ↑</option>
          <option value="price-desc">Цена ↓</option>
          <option value="name-asc">Название A-Я</option>
          <option value="name-desc">Название Я-А</option>
        </select>
      </div>
      <div class="main-search-col">
        <label class="main-switch">
          <input type="checkbox" id="main-search-free">
          <span class="switch-slider"></span>
          Бесплатные
        </label>
      </div>
    </section>
    <!-- Список товаров (перемещён выше категорий) -->
    <section id="main-products" class="main-products">
      <h2 id="main-products-title" style="display:none;">Товары</h2>
      <div id="main-products-list" class="products-list"></div>
    </section>
    <!-- Категории -->
    <section id="main-categories" class="main-categories">
      <h2>Категории товаров</h2>
      <div id="main-categories-list" class="categories-list"></div>
    </section>
  </div>

  <!-- Страница профиля -->
  <div id="profile-page" class="spa-page">
    <!-- 2.1. Основная информация -->
    <section id="profile-info" class="profile-info">
      <div class="profile-avatar-wrap">
        <img id="profile-avatar" src="images/placeholder.png" alt="avatar" class="profile-avatar">
      </div>
      <div class="profile-main-data">
        <div id="profile-name" class="profile-name">—</div>
        <div class="profile-id">ID: <span id="profile-tg-id">—</span>
          <!-- Кнопка скопировать ID удалена -->
        </div>
        <div class="profile-rating">
          <span id="profile-stars" class="profile-stars">★★★★★</span>
          <span id="profile-rating-value" class="profile-rating-value">—/5</span>
          <!-- Кнопка подробнее о рейтинге удалена -->
        </div>
        <div class="profile-actions">
          <!-- Кнопка редактирования профиля удалена -->
        </div>
      </div>
    </section>
    <!-- 2.2. Баланс и бонусы -->
    <section id="profile-balance" class="profile-balance">
      <div class="balance-main">
        <span>Баланс: </span><span id="balance-value">— ₽</span>
        <button id="balance-topup-btn" class="modal-btn">Пополнить</button>
        <button id="balance-withdraw-btn" class="modal-btn">Вывести</button>
      </div>
      <div class="balance-bonus">
        <span>Бонусы: </span><span id="bonus-value">—</span>
        <input id="promo-input" type="text" placeholder="Промокод">
        <button id="promo-activate-btn" class="modal-btn">Активировать</button>
      </div>
      <div class="balance-history">
        <button id="balance-history-btn" class="modal-btn">История операций</button>
        <button id="bonus-history-btn" class="modal-btn">История бонусов</button>
      </div>
    </section>
    <!-- 2.3. Корзина -->
    <section id="profile-cart" class="profile-cart">
      <h3>Корзина</h3>
      <div id="cart-list" class="cart-list">Ваша корзина пуста.</div>
      <div class="cart-summary">
        <span>Товаров: <span id="cart-count">0</span></span>
        <span>Сумма: <span id="cart-sum">0 ₽</span></span>
        <button id="cart-pay-btn" class="modal-btn">Оплатить все товары</button>
      </div>
    </section>
    <!-- 2.4. Темы сайта -->
    <section id="profile-themes" class="profile-themes">
      <h3>Темы сайта</h3>
      <select id="theme-select">
        <option value="light">Светлая</option>
        <option value="dark">Тёмная</option>
        <option value="newyear">Новогодняя</option>
        <option value="spring">Весенняя</option>
        <option value="custom">Своя тема…</option>
      </select>
      <button id="theme-edit-btn" class="modal-btn">Изменить/Создать свою тему</button>
    </section>
    <!-- 2.5. Мои товары -->
    <section id="profile-my-products" class="profile-my-products">
      <div class="my-products-header">
        <h3>Мои товары</h3>
        <button id="add-product-btn" class="modal-btn modal-btn-main">+ Добавить товар</button>
      </div>
      <div id="my-products-filters" class="my-products-filters">
        <select id="my-products-status">
          <option value="all">Все</option>
          <option value="pending">На модерации</option>
          <option value="approved">Одобрено</option>
          <option value="rejected">Отклонено</option>
        </select>
      </div>
      <div id="my-products-list" class="products-list"></div>
    </section>
  </div>

  <!-- Страница параметров -->
  <div id="settings-page" class="spa-page">
    <!-- 3.1. Настройки аккаунта -->
    <section id="settings-account" class="settings-account">
      <h3>Настройки аккаунта</h3>
      <div id="account-settings-list"></div>
    </section>
    <!-- 3.2. Мои заказы и файлы -->
    <section id="settings-orders" class="settings-orders">
      <h3>Мои заказы и файлы</h3>
      <div id="orders-list">Нет заказов.</div>
    </section>
    <!-- 3.3. Поддержка -->
    <section id="settings-support" class="settings-support">
      <h3>Поддержка</h3>
      <div id="support-info">
        <p>По всем вопросам обращайтесь: <a href="mailto:support@example.com">support@example.com</a></p>
        <button id="support-form-btn" class="modal-btn">Написать в поддержку</button>
      </div>
      <div id="support-form" style="display:none;">
        <textarea id="support-message" placeholder="Опишите ваш вопрос..." rows="4"></textarea>
        <button id="support-send-btn" class="modal-btn">Отправить</button>
      </div>
    </section>
    <!-- 3.4. Выбор цветовой темы (расширенный) -->
    <section id="settings-theme" class="settings-theme">
      <h3>Цветовая тема</h3>
      <select id="settings-theme-select">
        <option value="light">Светлая</option>
        <option value="dark">Тёмная</option>
        <option value="newyear">Новогодняя</option>
        <option value="spring">Весенняя</option>
        <option value="custom">Своя тема…</option>
      </select>
      <button id="settings-theme-edit-btn" class="modal-btn">Изменить/Создать свою тему</button>
    </section>
  </div>

  <!-- Модальные окна -->
  <div id="modal-root" style="display:none;"></div>
  <!-- Модалка истории операций -->
  <div id="modal-history" class="modal">
    <div class="modal-history-content">
      <button id="history-close" class="modal-close">×</button>
      <h2>История операций</h2>
      <div id="modal-history-body">
        <!-- История операций будет подгружаться через JS -->
      </div>
    </div>
  </div>
  <!-- Модалка истории бонусов -->
  <div id="modal-bonus-history" class="modal">
    <div class="modal-bonus-history-content">
      <button id="bonus-history-close" class="modal-close">×</button>
      <h2>История бонусов</h2>
      <div id="modal-bonus-history-body">
        <!-- История бонусов будет подгружаться через JS -->
      </div>
    </div>
  </div>
  <!-- Модалка пополнения баланса -->
  <div id="modal-topup" class="modal">
    <div class="modal-topup-content">
      <button id="topup-close" class="modal-close">×</button>
      <h2>Пополнение баланса</h2>
      <label for="topup-amount">Сумма (₽):</label>
      <input id="topup-amount" type="number" min="1" step="1" placeholder="Введите сумму" />
      <label for="topup-system">Платёжная система:</label>
      <select id="topup-system">
        <option value="yookassa">ЮKassa</option>
        <option value="cloudpayments">CloudPayments</option>
      </select>
      <div id="topup-error" class="modal-error"></div>
      <button id="topup-confirm" class="modal-btn modal-btn-main">Пополнить</button>
      <button id="topup-check" class="modal-btn modal-btn-secondary" style="display:none;">Проверить баланс</button>
    </div>
  </div>
  <!-- Модалка вывода средств -->
  <div id="modal-withdraw" class="modal">
    <div class="modal-withdraw-content">
      <button id="withdraw-close" class="modal-close">×</button>
      <h2>Вывод средств</h2>
      <label for="withdraw-amount">Сумма (₽):</label>
      <input id="withdraw-amount" type="number" min="1" step="1" placeholder="Введите сумму" />
      <label for="withdraw-method">Способ вывода:</label>
      <select id="withdraw-method">
        <option value="card">Банковская карта</option>
        <option value="yoomoney">ЮMoney</option>
        <option value="qiwi">Qiwi</option>
      </select>
      <input id="withdraw-details" type="text" placeholder="Номер карты/кошелька" />
      <div id="withdraw-error" class="modal-error"></div>
      <button id="withdraw-confirm" class="modal-btn" style="background:#43e97b; color:#fff;">Вывести</button>
    </div>
  </div>
  <!-- Модалка просмотра товара -->
  <div id="modal-product" class="modal">
    <div class="modal-product-content">
      <button id="product-close" class="modal-close">×</button>
      <div id="modal-product-body">
        <!-- Содержимое товара будет подгружаться через JS -->
      </div>
    </div>
  </div>
  <!-- Модалка добавления товара -->
  <div id="modal-add-product" class="modal">
    <div class="modal-add-product-content">
      <button id="add-product-close" class="modal-close">×</button>
      <h2>Добавить товар</h2>
      <form id="add-product-form" enctype="multipart/form-data">
        <label for="add-product-title">Название:</label>
        <input id="add-product-title" name="title" type="text" maxlength="100" required placeholder="Введите название товара" />
        <label for="add-product-description">Описание:</label>
        <textarea id="add-product-description" name="description" maxlength="1000" required placeholder="Опишите товар"></textarea>
        <label for="add-product-category">Категория:</label>
        <select id="add-product-category" name="category" required>
          <option value="">Загрузка...</option>
        </select>
        <label for="add-product-price">Цена (₽):</label>
        <input id="add-product-price" name="price" type="number" min="0" step="1" required placeholder="0" />
        <label for="add-product-image">Изображение:</label>
        <input id="add-product-image" name="image" type="file" accept="image/*" required />
        <div id="add-product-error" class="modal-error"></div>
        <button id="add-product-submit" class="modal-btn modal-btn-main" type="submit">Добавить</button>
      </form>
    </div>
  </div>
  <!-- Toast уведомления -->
  <div id="toast" class="toast" style="display:none;"></div>

  <!-- Нижняя панель навигации -->
  <nav id="bottom-tabs">
    <button class="tab-btn" data-page="main-page">
      <span>🏠</span>
      <span>Главная</span>
    </button>
    <button class="tab-btn" data-page="profile-page">
      <span>👤</span>
      <span>Профиль</span>
    </button>
    <button class="tab-btn" data-page="settings-page">
      <span>⚙️</span>
      <span>Параметры</span>
    </button>
  </nav>

  <footer>
    <p>&copy; 2025 Мой Интернет-Магазин</p>
  </footer>

  <!-- Подключение Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <!-- Основная логика SPA и загрузки данных -->
  <script src="js/app.js"></script>
  <script>
  // Открытие/закрытие модалки добавления товара
  document.addEventListener('DOMContentLoaded', function() {
    const addProductBtn = document.getElementById('add-product-btn');
    const modalAddProduct = document.getElementById('modal-add-product');
    const addProductClose = document.getElementById('add-product-close');
    if (addProductBtn && modalAddProduct && addProductClose) {
      addProductBtn.addEventListener('click', function() {
        modalAddProduct.style.display = 'flex';
        document.body.classList.add('modal-open');
      });
      addProductClose.addEventListener('click', function() {
        modalAddProduct.style.display = 'none';
        document.body.classList.remove('modal-open');
      });
      // Закрытие по клику вне контента
      modalAddProduct.addEventListener('mousedown', function(e) {
        if (e.target === modalAddProduct) {
          modalAddProduct.style.display = 'none';
          document.body.classList.remove('modal-open');
        }
      });
    }
  });
</script>
</body>
</html>